<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Passaporto Facile</title>
  <link rel="stylesheet" href="/bootstrap-italia/css/bootstrap-italia.min.css">
  <script src="/main.js" defer></script>
</head>
<body>
  <div class="it-header-slim-wrapper">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="it-header-slim-wrapper-content">
            <a href="#" class="d-lg-block navbar-brand">Passaporto Facile</a>
            <div class="it-header-slim-right-zone">
              <a href="https://www.passaportonline.poliziadistato.it/" class="btn btn-primary btn-icon btn-full">
                <span class="rounded-icon">
                  <svg class="icon icon-primary">
                    <use href="/bootstrap-italia/svg/sprites.svg#it-external-link"></use>
                  </svg>
                </span>
                <span class="d-none d-lg-block">Vai al sito ufficiale</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <section class="it-hero-wrapper it-hero-small-size">
    <div class="container">
      <div class="row">
          <div class="col-12">
            <div class="it-hero-text-wrapper bg-dark">
                <h1>Prenota il passaporto online con facilità.</h1>
                <p class="d-none d-lg-block">Salta tutti i passaggi intermedi. Accedi direttamente alla schermata di conferma dell'appuntamento.</p>
            </div>
          </div>
      </div>
    </div>
  </section>

  <section class="section section-muted" aria-describedby="titleStart">
    <div class="section-content">
      <div class="container">
        <div class="row mb-3">
          <div class="col-12">
            <h2 id="titleStart">Inizia</h2>
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-lg-6 col-xl-4 pe-0 pe-md-5 mb-3 font-serif">
            <p>
              Prima di iniziare con la procedura è necessario avere una sessione
              attiva nel portale ufficiale di prenotazione dei passaporti della
              Polizia di Stato.
            </p>
            <a href="https://www.passaportonline.poliziadistato.it/LogInAction.do?codop=loginCittadino" target="_blank" class="btn btn-primary btn-icon btn-me">
              <span>Accedi</span>
              <svg class="icon icon-white ms-1">
                <use href="/bootstrap-italia/svg/sprites.svg#it-external-link"></use>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section" aria-describedby="titleForm">
    <div class="section-content">
      <div class="container">
        <div class="row mb-3">
          <div class="col-12">
            <h2 id="titleForm">Compila con i dati richiesti</h2>
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-lg-6 col-xl-4 pe-0 pe-md-5 mb-3 font-serif">
            <p>
              Ora procedi all'inserimento dei dati richiesti e, una volta
              finito, clicca il pulsante "Invia".
            </p>
          </div>
        </div>
        <form id="form" class="needs-validation border p-5">
          <div class="form-group">
            <label class="active" for="data">Data</label>
            <input type="date" id="data" class="form-control">
          </div>
          <div class="form-group">
            <label class="active" for="orario">Orario</label>
            <input type="time" id="orario" class="form-control">
          </div>
          <div class="form-group">
            <label for="idRegista" class="input-number-label">idRegista</label>
            <input type="number" id="idRegista" class="form-control" data-bs-input min="0" aria-describedby="idRichiedenteHelpDescription">
            <small id="idAppuntamentoHelpDescription" class="form-text">
              Corrisponde all'identificativo dell'ufficio presso cui prendere
              appuntamento.
            </small>
          </div>
          <div class="form-check form-check-group">
            <input id="richiedenteIsTitolare" type="checkbox" checked>
            <label for="richiedenteIsTitolare">Il richiedente è il titolare del profilo</label>
            <small class="form-text">Se si prende appuntamento per un'altra persona occorre rimuovere la spunta da questa casella.</small>
          </div>
          <div id="altriRic" class="row d-none">
            <div class="form-group col-md-6">
              <label for="idAppuntamento" class="input-number-label">idAppuntamento</label>
              <input type="number" id="idAppuntamento" class="form-control" data-bs-input min="0" aria-describedby="idAppuntamentoHelpDescription">
              <small id="idAppuntamentoHelpDescription" class="form-text">
                Corrisponde all'identificativo del titolare del profilo.
              </small>
            </div>
            <div class="form-group col-md-6">
              <label for="idRichiedente" class="input-number-label">idRichiedente</label>
              <input type="number" id="idRichiedente" class="form-control" data-bs-input min="0" aria-describedby="idRichiedenteHelpDescription">
              <small id="idAppuntamentoHelpDescription" class="form-text">
                Corrisponde all'identificativo del richiedente l'appuntamento.
              </small>
            </div>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary">Invia</button>
          </div>
        </form>
        <div class="row mt-4">
          <div class="col-12">
            <div aria-live="polite" id="errorMsgContainer"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TODO: add copy buttons -->
  <section class="section section-neutral" aria-describedby="titleHowTo">
    <div class="section-content">
      <div class="container white-color">
        <div class="row mb-3">
          <div class="col-12">
            <h2 id="titleHowTo">Come ottenere i vari identificativi</h2>
          </div>
        </div>
        <div class="row mb-1">
          <div class="card-wrapper">
            <div class="card">
              <div class="card-body">
                <h3 class="card-title h5">idRegista</h3>
                <p class="card-text font-serif">
                  Dalla pagina <b><i>Inserisci Appuntamento</i></b> incolla il seguente codice nella
                  <i>console</i> del <i>browser</i> per ottenere gli
                  identificativi di tutti i richiedenti registrati nel tuo
                  profilo.
                </p>
                <pre class="text-secondary">
const output = [...document.querySelectorAll('.imposta_utenti > tbody > tr.data')]
  .map(e => [e.querySelector(':scope > td[headers="descrizione"]').innerText, e.id])
  .reduce((prev, curr) => prev + `\n${curr[0]}: ${curr[1]}`, '')
  .trim();

console.log(output);
                </pre>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="card-wrapper">
            <div class="card">
              <div class="card-body">
                <h3 class="card-title h5">idAppuntamento <span style="font-weight: normal;">e</span> idRichiedente</h3>
                <p class="card-text font-serif">
                  Dalla pagina <b><i>Home</i></b> incolla il seguente codice
                  nella <i>console</i> del <i>browser</i> per ottenere gli
                  identificativi di tutti gli uffici disponibili nella provincia
                  selezionata.
                </p>
                <pre class="text-secondary">
const output = [...document.querySelectorAll('.tab_app_content')]
  .filter(e => e.querySelector(':scope form[action="/GestioneRichiedentiAction.do"]') !== null)
  .map(e => [e.querySelector(':scope > .tab_app_nome > span').innerText, e.querySelector(':scope input[name="idAppuntamento"]').value])
  .reduce((prev, curr) => prev + `\n${curr[0]}: ${curr[1]}`, '')
  .trim();

console.log(output);
                </pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="it-footer">
    <div class="it-footer-main">
      <div class="container">
        <section>
          <div class="row clearfix">
            <div class="col-sm-12">
              <div class="it-brand-wrapper">
                <a href="https://alexsandri.com" data-focus-mouse="false">
                  <div class="it-brand-text">
                    <h2>Alex Sandri</h2>
                    <h3 class="d-none d-md-block">&copy; 2023</h3>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
    <div class="it-footer-small-prints clearfix">
      <div class="container">
        <ul class="it-footer-small-prints-list list-inline mb-0 d-flex flex-column flex-md-row">
          <li class="list-inline-item">
            <a href="/uffici-conosciuti.txt" title="Uffici conosciuti">
              Uffici conosciuti
            </a>
          </li>
          <li class="list-inline-item">
            <a href="https://github.com/alex-sandri/passaporto-facile" title="Codice sorgente">
              Codice sorgente
            </a>
          </li>
        </ul>
      </div>
    </div>
  </footer>

  <script src="/bootstrap-italia/js/bootstrap-italia.bundle.min.js"></script>
  <script>bootstrap.loadFonts('/bootstrap-italia/fonts');</script>
</body>
</html>